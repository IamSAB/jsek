<template>
<header class="page-header pt-10 relative">
  <nav class="flex flex-col sm:flex-row items-center justify-center">
      <Menu :links="menuNavbarLeft" class="flex flex-row sm:flex-col md:flex-row items-end mt-5 sm:m-0" />
      <svg class="order-first sm:order-none stroke-current text-white h-32 mx-5" viewBox="0 0 64 64">
        <g transform="translate(0 -280.1)">
          <path fill="none" stroke-width="0.6px" d="M27.533 280.8c-3.206 4.555-5.316 13.28-1.527 9.771 3.789-3.504 10.1-8.246 14.57-8.811m-25.34 3.448c-1.076 5.466.543 14.29 2.579 9.548 2.036-4.742 5.874-11.64 9.728-13.98m-21.75 13.46c1.24 5.431 6.309 12.83 6.24 7.673-.069-5.16.631-13.03 3.202-16.72m-14.39 21.14c3.342 4.457 10.98 9.158 8.82 4.472-2.161-4.686-4.72-12.16-3.876-16.58m-4.551 25.16c4.866 2.713 13.76 3.899 9.877.497-3.881-3.402-9.257-9.185-10.29-13.57m6.078 24.84c5.548.5 14.15-2.034 9.226-3.563-4.93-1.529-12.19-4.625-14.92-8.214m15.66 20.22c5.272-1.8 12.1-7.615 6.979-7.008-5.125.608-13.02.734-16.97-1.437m22.53 12.1c4.083-3.789 7.96-11.88 3.525-9.24-4.435 2.64-11.6 5.966-16.09 5.59m25.5 1.895c2.189-5.122 2.44-14.09-.538-9.875-2.978 4.215-8.167 10.17-12.42 11.65m24.07-8.64c-.084-5.57-3.503-13.86-4.508-8.804-1.006 5.062-3.325 12.61-6.61 15.69m18.47-17.68c-2.342-5.055-8.84-11.24-7.7-6.208 1.14 5.033 2.092 12.87.346 17.03m9.684-23.67c-4.195-3.665-12.65-6.674-9.558-2.54 3.089 4.134 7.145 10.91 7.24 15.41m-.78-25.56c-5.324-1.642-14.27-.953-9.766 1.567 4.503 2.521 10.96 7.06 12.88 11.14m-11.11-23.03c-5.53.666-13.42 4.933-8.283 5.404 5.14.471 12.89 1.99 16.3 4.933m-19.52-16.52c-4.782 2.857-10.26 9.966-5.369 8.306 4.887-1.66 12.58-3.425 16.9-2.123"/>
          <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="1px">
              <g>
              <path d="M12.46 312.4c2.981-.177 4.473-.806 4.475 1.182"/>
              <path d="M12.95 308.9s4.195 1.645 4.508-.42c.313-2.065-4.143-2.01-4.143-2.01"/>
              <path d="M18.74 305.4l-3.712-2.541 4.983.166-3.58-2.508"/>
              <path d="M21.24 296.6s-1.37-.044-1.602 1.37c-.232 1.414 2.398 3.392 3.359 2.276.961-1.116-.586-2.265-.586-2.265l-.652.64"/>
              <path d="M25.6 294s-1.668.1-1.271 1.381c.398 1.282 2.044.652 2.353 1.823s-1.295 1.345-1.295 1.345"/>
              <path d="M30.46 293.2s-1.735-.365-1.701 2.099c.033 2.464 2.276 2.044 2.276 2.044"/>
              <path d="M32.98 297.6l.652-4.574-.316 2.214 2.331.464.382-2.28-.74 4.419"/>
              <path d="M41.37 300.8l2.917-3.127s1.867 1.282.895 2.166c-.972.884-2.32-.639-2.32-.639 1.032 1.831.11 3.191.11 3.191"/>
              <path d="M37.21 298.5l2.795-3.712.972.497-1.395 4.55.497-1.619-1.866-1.047"/>
            </g>
            <g>
              <path d="M46.41 309.3l-.43-1.701 2.021-.53.387 1.315-.387-1.315 2-.52.453 1.68"/>
              <path d="M46.4 311.1l4.64-.055s.23 2.312-.994 2.298c-1.224-.014-1.171-2.232-1.171-2.232s-.266 2.232-1.47 2.22c-1.203-.01-1.004-2.231-1.004-2.231"/>
              <path d="M46 315.5l4.132 1.492-4.784 1.016 4.066 1.414"/>
              <path d="M44.25 319.9l3.027 3.547-.586.818-4.265-2.077 1.235.601 1.456-1.872"/>
              <path d="M40.84 323.6c.14.188 2.865 3.329 2.865 3.329l.924-.825-1.942 1.734"/>
              <path d="M40.13 325.9l-1.083.743"/>
              <path d="M36.6 326l1.245 4.631-.864-3.213-1.641 3.8.988-2.286-1.937-2.455"/>
              <path d="M32.53 326.9l-.973 4.54-.939.03-.716-4.589.18 1.148 2.221-.073"/>
              <path d="M27.86 326.3l-1.172 4.348s-2.306-.513-1.848-1.905 2.519-.582 2.519-.582"/>
              <path d="M24.05 324.6l-2.584 3.9s-1.896-1.102-1.114-2.399c.782-1.296 2.571.2 2.571.2"/>
              <path d="M19.8 320.6l1.076 1.367-1.726 1.346-.798-1.04.798 1.04-1.714 1.29-1.07-1.378"/>
              <path d="M17.99 317.6l.752 1.441-3.997 1.867"/>
            </g>
          </g>
          <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5px">
            <path d="M25.38 314.5s-.19 3.928 3.063 3.977 3.529-3.994 3.529-3.994l-.016-10.32"/>
            <path d="M26.69 309.2l10.64-.037"/>
            <path d="M38.56 314.6s.186 3.977-3.136 3.987c-3.321.01-3.456-4.087-3.456-4.087"/>
          </g>
        </g>
      </svg>
      <Menu :links="menuNavbarRight" class="flex flex-row sm:flex-col md:flex-row my-2 sm:my-0" />
  </nav>
  <svg class="w-full" viewBox="0 0 200 15">
    <path fill="var(--color-bg)" d="M0 15.1V7.976l3.953-.619 4.486-.817 5.701-1.016 3.889-.376 8.529-.265 2.983-.177 3.558-.044.044-.398.398-.287.508.265.066.42 1.635.11 1.016.266 1.458-.177 2.077-.64 2.961-.465 3.911-.353 4.817.066 2.895.11 1.922.552 1.326 1.15 1.79 1.48.995.928.53.022.884 1.436 1.127 1.214 1.039.685 1.083.443 2.099.065 1.989.067.906-.177.486-.928.486-1.414.399-.74.684.143.11-.994.84-1.105 1.392-.928.663-.133.707.398 1.525.088 1.458.243.553.707.317.645.368.128.22-.707.41-.143.519.033.39.476.87.053.905.177.818 1.083.31 1.414.574.707.884.796.906 1.149.883.486.487.73.596.64 1.348.044 1.016-.155.177-1.016.619-.22.353-1.017.995-.486 1.016-.044.176-1.37.575-.176.177-1.061.334-.517.534.302.365-.8.557-.532.685-1.083.353-.2.486-.706.707-.022.995.154.265.53.508.178.73 1.193.795.088.331.707.62.464.728.596.155 1.15.53.353.022.884.376.31.265-.133.995.95 1.436-.066 1.613-.972.75-.685.951-.177.619-1.436.243-1.282.42-.486.54.33.277-.065.619-2.077.862-1.215.795-.155 1.04.199 1.612-.177.442-.464 1.237-.044.287.464.995.044 1.17-.022.423-.292.481-.021.246.446.53.11 2.254.089 1.237.375.818.509.265 1.039.64.685.664 1.06.31.884.242.575 1.635.663 1.26 1.06 1.392.819 1.127-.376 1.127.22.84-.087.884.199.685-.265 1.016-.243.862-.2.618-1.347.442.066.442-1.016.906-.884.398-.884.464-.574.464-1.193-.022-.641.42-.619h1.149l.773.221.486.641.597.354.508.596 1.105.464.795.597.575.155.795.287.486.486.31.972.088.553h1.061l.486.994.752.442.884.088.375.508.553-.618 1.436.044.64-.133.554-.222.242-.574h.375l.264.605.289-.01.31-1.724.684-.464.31-.752.514-.072.59.404.884.265 1.458-.022 1.016-.221.553-.818.355-.591.683-.315.73.177.75-.177.664-.685 1.414.155.884.044 1.039.751 1.089.542 1.143.077.53.552 2.276.773.95.486.972 1.127.464.553 1.237.022.973.486.972.31.486.994 1.016.022.95.044 1.436-.486 1.215-.265.73-.818.707-.177 1.922.243 1.458.243 1.79.155 1.37.088.972.464.825.122V15.1z"/>
  </svg>
  <nav class="absolute top-0 right-0 p-5">
    <ul class="flex">
      <li v-for="(item, index) in socials" :key="index" class="mx-2">
        <factor-link
          :key="index"
          :path="item.url"
          target="_blank"
          class="text-xs tracking-tighter text-white"
        >
          <factor-icon :icon="item.icon" />
          <span class="hidden xl:inline" v-if="item.title">{{ item.title }}</span>
        </factor-link>
      </li>
    </ul>
  </nav>
  <div class="absolute top-0 left-0 p-5" v-if="postId">
    <factor-link class="text-white">
      <factor-icon icon="fas fa-edit" />
      <factor-post-edit class="text-white uppercase font-semibold" :post-id="postId"/>
    </factor-link>
  </div>
</header>
</template>

<script lang="ts">
import { factorIcon, factorLink } from "@factor/ui"
import { setting, stored } from "@factor/api"
import { factorPostEdit } from "@factor/post";
import Menu from "./components/menu.vue"

export default {
  components: {
    Menu,
    factorIcon,
    factorLink,
    factorPostEdit
  },
  data() {
    return {
      loading: true,
      menuNavbarLeft: setting("site.menus.navbarLeft"),
      menuNavbarRight: setting("site.menus.navbarRight"),
      socials: setting("site.menus.socials")
    }
  },
  computed: {
    postId () {
      const post = stored("permalink");
      return  post ? post._id : ""
    }
  },
  mounted: function () {
    this.loading = false
  }
}
</script>

<style>
  .page-header {
    background: var(--color-primary);
    background: radial-gradient(circle at center, var(--color-primary-lighter) 0%, var(--color-primary) 50%, var(--color-primary-darker) 100%); 
  }
</style>